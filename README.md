# kursovoi_project
### Остапов, Иванов, Вознюк

**Настройка сжатия данных при передаче** 

Требуется добавить функциональность сжатия данных в систему резервного копирования WAL-G для команды быстрого восстановления реплики.

**Этапы работы:**

1. **Поиск нужного алгоритма сжатия:**
    Мы выделели следующие подходящие алгоритмы сжатия (gzip, zlib, bzip2, lz4 и др.).
    Анализируем скорость и степень сжатия

2. **Интеграция выбранного алгоритма сжатия:**

3. **Модификация команды `catchup-send`:**
    Добавляем сжатие данных перед их шифрованием.

4. **Модификация команды `catchup-receive`:**
    Добавляем расшифровку данных перед их разархивированием.

5. **Тестирование:**

6. **Написание отчёта:**

**Выбранный алгоритм сжатия:** gzip 


**Использованные ресурсы:**
 Исходный код WAL-G репозитория `sndrcv_for_student_projects`.
 Документация по выбранному алгоритму сжатия.
 Средства для тестирования (тестовые базы данных и нагрузочные тесты).

**Интеграция:**
Для успешной интеграции функциональности сжатия данных в систему WAL-G, потребуется взаимодействие с несколькими основными скриптами и конфигурационными файлами.

1.  **Скрипт:** `catchup_send_receive_handler.go`
    Это основной файл, содержащий логику работы команд `catchup-send` и `catchup-receive`. В этом файле необходимо будет добавить функциональность сжатия и разархивирования данных.

2.  **Скрипт:** `config.go` 
    В этом скрипте конфигурации содержатся параметры найтроки сжатия.

3.  **Скрипт:** `compression.go`
    Скрипт содержит функции для сжатия и разархивирования данных.

4. **Тестовые скрипты:**
    **Скрит:** `catchup_send_receive_handler_test.go`, `compression_test.go`
    Подготовили скрипты для проверок тестовых функций сжатия и разархивирования.

### Подробное описание скриптов:

1. **catchup_send_receive_handler.go:**
    В этом файле содержутся вызовы функций сжатия перед шифрованием и разархивирования после расшифровки.

2. **compression.go:**
    Скрипт содержит функции `compress(data []byte) ([]byte, error)` и `decompress(data []byte) ([]byte, error)`.

3. **config.go:**
    Параметры конфигурации:
     ```go
     type CompressionConfig struct {
         Enabled bool `yaml:"enabled"`
         Level   int  `yaml:"level"`
     }

     var Compression CompressionConfig
     ```

4. **catchup_send_receive_handler_test.go и compression_test.go:**
    Скрипты содержат тесты для проверки корректности работы функций сжатия и разархивирования, а также интеграционные тесты для команд `catchup-send` и `catchup-receive`.

